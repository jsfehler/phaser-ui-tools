/*! phaser-ui-tools 2017-07-03 */

var Phaser,uiWidgets=uiWidgets||{};uiWidgets.Bar=function(){},uiWidgets.Bar.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Bar.constructor=uiWidgets.Bar,uiWidgets.Bar.prototype.setTrackScrollAreaSize=function(){"use strict";this.vertical?this.trackScrollAreaSize=this.track.height-this.vslice:this.trackScrollAreaSize=this.track.width-this.hslice},uiWidgets.Bar.prototype.centerStaticAxis=function(){"use strict";this.vertical?this.bar.x=this.track.x+this.track.width/2-this.bar.width/2:this.bar.y=this.track.y+this.track.height/2-this.bar.height/2};var Phaser;(uiWidgets=uiWidgets||{}).textSprite=function(t,i,s,e,a,r){"use strict";Phaser.Sprite.call(this,t,a,r,i),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textSprite.prototype=Object.create(Phaser.Sprite.prototype),uiWidgets.textSprite.constructor=uiWidgets.textSprite,uiWidgets.textButton=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Button.call(this,t,a,r,i,h,o),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textButton.prototype=Object.create(Phaser.Button.prototype),uiWidgets.textButton.constructor=uiWidgets.textButton;var Phaser;(uiWidgets=uiWidgets||{}).Column=function(t,i){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.context=i},uiWidgets.Column.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Column.constructor=uiWidgets.Column,uiWidgets.Column.prototype.addNode=function(t){"use strict";this.add(t);var i=this.children[this.children.length-2];void 0!==i&&t.alignTo(i,Phaser.BOTTOM_CENTER)};var Phaser;(uiWidgets=uiWidgets||{}).QuantityBar=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.x=i.x,this.y=i.y,this.valueRange=new uiWidgets.QuantityRange(this,s.startValue,s.maxValue),this.vertical=e||!1,this.reverse=a||!1,this.trackImage=r,this.barImage=h,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.bar=this.game.add.button(0,0,this.barImage,this.moveContent,this,1,0),this.add(this.bar),this.create()},uiWidgets.QuantityBar.prototype=Object.create(uiWidgets.Bar.prototype),uiWidgets.QuantityBar.constructor=uiWidgets.QuantityBar,uiWidgets.QuantityBar.prototype.setMask=function(){"use strict";null!==this.bar.mask&&(this.bar.mask.destroy(),this.bar.mask=null),this.bar.mask=this.game.add.graphics(this.maskX,this.maskY),this.bar.mask.beginFill(255),this.bar.mask.drawRect(0,0,this.maskW,this.maskH),this.bar.mask.endFill()},uiWidgets.QuantityBar.prototype.getBarPosition=function(){"use strict";var t=this.valueRange.getRatio()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t},uiWidgets.QuantityBar.prototype.create=function(){"use strict";this.centerStaticAxis(),this.maskW=this.bar.width,this.maskH=this.bar.height,this.maskX=this.bar.x+this.x,this.maskY=this.bar.y+this.y,this.vertical?this.maskH=this.getBarSize():this.maskW=this.getBarSize(),this.setMask(),this.reverse&&(this.vertical?this.bar.mask.y=this.bar.y+this.y+this.getBarFraction():this.bar.mask.x=this.bar.x+this.x+this.getBarFraction()),this.windowScrollAreaSize=this.valueRange.maxValue,this.vslice=this.track.height*this.valueRange.getRatio(),this.hslice=this.track.width*this.valueRange.getRatio(),this.setTrackScrollAreaSize()},uiWidgets.QuantityBar.prototype.addScrollTweenMask=function(t){"use strict";this.game.add.tween(this.bar.mask).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)},uiWidgets.QuantityBar.prototype.adjustBar=function(t){"use strict";this.valueRange.currentValue+=t;var i,s=this.getBarSize();i=this.reverse?this.vertical?{height:s,y:this.bar.y+this.y+this.getBarFraction()}:{width:s,x:this.bar.x+this.x+this.getBarFraction()}:this.vertical?{height:s}:{width:s},this.addScrollTweenMask(i)},uiWidgets.QuantityBar.prototype.getBarFraction=function(){"use strict";return this.vertical?this.track.height*this.valueRange.getRatio():this.track.width*this.valueRange.getRatio()},uiWidgets.QuantityBar.prototype.getBarSize=function(){"use strict";return this.reverse?this.vertical?this.track.height-this.valueRange.getRatio():this.track.width-this.valueRange.getRatio():this.getBarFraction()};var Phaser;(uiWidgets=uiWidgets||{}).QuantityRange=function(t,i,s){"use strict";this.bar=t,this.startValue=i,this.maxValue=s,this.currentValue=i},uiWidgets.QuantityRange.prototype.getRatio=function(){"use strict";return this.currentValue/this.maxValue},uiWidgets.QuantityRange.prototype.getCurrentValue=function(){"use strict";return this.currentValue},uiWidgets.ValueRange=function(t,i,s){"use strict";this.step=t,this.startValue=i,this.maxValue=s+t,this.ratio=t/s,this.ratio>1&&(this.ratio=1),this.currentValue=i,this.steps=[];for(var e=0;e<this.maxValue;e+=t)this.steps.push(e)},uiWidgets.ValueRange.prototype.adjustValue=function(t){"use strict";this.currentValue=t},uiWidgets.ValueRange.prototype.getCurrentValue=function(){"use strict";return this.currentValue},uiWidgets.ViewportRange=function(t,i){"use strict";this.viewport=t,this.vertical=i,i?(this.step=t.area.height,this.maxValue=t.height):(this.step=t.area.width,this.maxValue=t.width),this.ratio=this.step/this.maxValue,this.ratio>1&&(this.ratio=1)},uiWidgets.ViewportRange.prototype.adjustValue=function(t){"use strict";this.vertical?this.viewport.y=t+this.viewport.area.y:this.viewport.x=t+this.viewport.area.x,this.viewport.disableOutOfBounds(this.viewport.children,this,this.vertical)},uiWidgets.ViewportRange.prototype.getCurrentValue=function(){"use strict";return this.vertical?this.viewport.y-this.viewport.area.y:this.viewport.x-this.viewport.area.x};var Phaser;(uiWidgets=uiWidgets||{}).Row=function(t,i){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.context=i},uiWidgets.Row.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Row.constructor=uiWidgets.Row,uiWidgets.Row.prototype.addNode=function(t){"use strict";this.add(t);var i=this.children[this.children.length-2];void 0!==i&&t.alignTo(i,Phaser.RIGHT_CENTER)};var Phaser;(uiWidgets=uiWidgets||{}).Scrollbar=function(t,i,s,e,a,r,h,o){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.content=i,this.valueRange=new uiWidgets.ViewportRange(i,e),this.vertical=e||!1,this.draggable=s||!1,(a=a||!1)&&this.enableKeyboard(),this.trackImage=r,this.barImage=h,this.minBarSize=44,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.x,this.y,this.barImage,this.moveContent,this,1,0),this.add(this.bar),this.resizeBar(),this.create()},uiWidgets.Scrollbar.prototype=Object.create(uiWidgets.Bar.prototype),uiWidgets.Scrollbar.constructor=uiWidgets.Scrollbar,uiWidgets.Scrollbar.prototype.enableKeyboard=function(){"use strict";this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.vertical?(this.upKey.onDown.add(this.scrollUp,this),this.downKey.onDown.add(this.scrollDown,this),this.leftKey.onDown.add(this.scrollUp,this),this.rightKey.onDown.add(this.scrollDown,this)):(this.upKey.onDown.add(this.scrollLeft,this),this.downKey.onDown.add(this.scrollRight,this),this.leftKey.onDown.add(this.scrollLeft,this),this.rightKey.onDown.add(this.scrollRight,this))},uiWidgets.Scrollbar.prototype.enableTrackClick=function(){"use strict";this.track.inputEnabled=!0,this.track.events.onInputDown.add(this.clickTrack,this)},uiWidgets.Scrollbar.prototype.resizeBar=function(){"use strict";var t;(t=this.vertical?this.track.height*this.valueRange.ratio:this.track.width*this.valueRange.ratio)<this.minBarSize&&(t=this.minBarSize),this.vertical?this.bar.height=t:this.bar.width=t},uiWidgets.Scrollbar.prototype.enableBarDrag=function(){"use strict";this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this),this.vertical?this.setDraggableArea(this.track.x-(this.bar.width-this.track.width)/2,this.track.y,this.bar.width,this.track.height):this.setDraggableArea(this.track.x,this.track.y-(this.bar.height-this.track.height)/2,this.track.width,this.bar.height)},uiWidgets.Scrollbar.prototype.create=function(){"use strict";this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()},uiWidgets.Scrollbar.prototype.setDraggableArea=function(t,i,s,e){"use strict";this.vertical?this.bar.input.allowHorizontalDrag=!1:this.bar.input.allowVerticalDrag=!1,this.bar.input.boundsRect=new Phaser.Rectangle(t,i,s,e)},uiWidgets.Scrollbar.prototype.setInitialBarPosition=function(){"use strict";var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y:this.bar.x=t+this.track.x},uiWidgets.Scrollbar.prototype.addScrollTween=function(t){"use strict";this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0;var i;(i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)).onUpdateCallback(this.moveContent,this),i.onComplete.add(this.enableBarInput,this)},uiWidgets.Scrollbar.prototype.scrollUp=function(){"use strict";if(this.bar.y!==this.track.y&&!this.barMoving){var t=this.bar.y-this.vslice,i=null;this.barMoving=!0,i=t<=this.track.y?this.track.y:this.bar.y-this.vslice,this.addScrollTween({y:i})}},uiWidgets.Scrollbar.prototype.scrollDown=function(){"use strict";if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=this.bar.y+2*this.vslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.y+this.track.height?this.track.y+this.track.height-this.bar.height:this.bar.y+this.vslice,this.addScrollTween({y:i})}},uiWidgets.Scrollbar.prototype.scrollLeft=function(){"use strict";if(this.bar.x!==this.track.x&&!this.barMoving){var t=this.bar.x-this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t<=this.track.x?this.track.x:this.bar.x-this.hslice,this.addScrollTween({x:i})}},uiWidgets.Scrollbar.prototype.scrollRight=function(){"use strict";if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=this.bar.x+2*this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.x+this.track.width?this.track.x+this.track.width-this.bar.width:this.bar.x+this.hslice,this.addScrollTween({x:i})}},uiWidgets.Scrollbar.prototype.enableBarInput=function(){"use strict";this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0},uiWidgets.Scrollbar.prototype.clickTrack=function(t,i){"use strict";this.vertical?this.game.input.mousePointer.y>this.bar.y+this.bar.height+this.y?this.scrollDown():this.game.input.mousePointer.y<this.bar.y+this.y&&this.scrollUp():this.game.input.mousePointer.x>this.bar.x+this.bar.width+this.x?this.scrollRight():this.game.input.mousePointer.x<this.bar.x+this.x&&this.scrollLeft()},uiWidgets.Scrollbar.prototype.saveMousePosition=function(t,i){"use strict";this.mousePointer={x:i.x,y:i.y}},uiWidgets.Scrollbar.prototype.getBarPosition=function(){"use strict";var t=this.valueRange.getCurrentValue()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t},uiWidgets.Scrollbar.prototype.getMouseDelta=function(){"use strict";var t,i,s,e;return t=this.vertical?this.mousePointer.y:this.mousePointer.x,s=this.trackClicked?{x:this.bar.x,y:this.bar.y}:{x:this.game.input.mousePointer.x,y:this.game.input.mousePointer.y},i=this.vertical?s.y:s.x,this.mousePointer=s,e=this.vertical?this.track.height+this.y:this.track.width+this.x,i<e?t-i:0},uiWidgets.Scrollbar.prototype.getGripPositionRatio=function(){"use strict";var t=this.getBarPosition()+this.getMouseDelta();t>0?t=0:t<=-this.trackScrollAreaSize&&(t=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=-this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=-this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return isNaN(i)&&(i=0),i},uiWidgets.Scrollbar.prototype.moveContent=function(){"use strict";var t=this.getGripPositionRatio()*this.windowScrollAreaSize;this.valueRange.adjustValue(t)};var Phaser;(uiWidgets=uiWidgets||{}).ValueBar=function(t,i,s,e,a,r,h,o,n){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.x=i.x,this.y=i.y,this.valueRange=new uiWidgets.ValueRange(s.step,s.startValue,s.maxValue),this.vertical=a||!1,this.draggable=e||!1,(r=r||!1)&&this.enableKeyboard(),this.trackImage=h,this.barImage=o,this.tweenParams=n||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.track=this.game.add.sprite(0,0,this.trackImage),this.add(this.track),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.x,this.y,this.barImage,this.moveContent,this,1,0),this.add(this.bar),this.create()},uiWidgets.ValueBar.prototype=Object.create(uiWidgets.Scrollbar.prototype),uiWidgets.ValueBar.constructor=uiWidgets.ValueBar,uiWidgets.ValueBar.prototype.setTrackScrollAreaSize=function(){"use strict";this.vertical?this.trackScrollAreaSize=this.track.height:this.trackScrollAreaSize=this.track.width},uiWidgets.ValueBar.prototype.setInitialBarPosition=function(){"use strict";var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y-this.bar.height/2:this.bar.x=t+this.track.x-this.bar.width/2},uiWidgets.ValueBar.prototype.enableBarDrag=function(){"use strict";this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.bar.events.onInputUp.add(this.snapToClosestPosition,this),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this),this.vertical?this.setDraggableArea(this.track.x-(this.bar.width-this.track.width)/2,this.track.y,this.bar.width,this.track.height+this.bar.height):this.setDraggableArea(this.track.x-this.bar.width/2,this.track.y-(this.bar.height-this.track.height)/2,this.track.width+this.bar.width,this.bar.height)},uiWidgets.ValueBar.prototype.snapToClosestPosition=function(){"use strict";for(var t=this.valueRange.getCurrentValue(),i=Math.abs(t-this.valueRange.steps[0]),s=this.valueRange.steps[0],e=0;e<this.valueRange.steps.length;e++){var a=Math.abs(t-this.valueRange.steps[e]);a<i&&(i=a,s=this.valueRange.steps[e])}this.valueRange.adjustValue(s),this.moveContent(),this.setInitialBarPosition()},uiWidgets.ValueBar.prototype.addScrollTween=function(t){"use strict";this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0;var i;(i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)).onComplete.add(this.moveContent,this),i.onComplete.add(this.enableBarInput,this)},uiWidgets.ValueBar.prototype.scrollUp=function(){"use strict";if(this.bar.y!==this.track.y&&!this.barMoving){var t=null;this.barMoving=!0,t=this.bar.y-this.vslice,this.addScrollTween({y:t})}},uiWidgets.ValueBar.prototype.scrollDown=function(){"use strict";if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=null;this.barMoving=!0,this.bar.inputEnabled=!1,t=this.bar.y+this.vslice,this.addScrollTween({y:t})}},uiWidgets.ValueBar.prototype.scrollLeft=function(){"use strict";if(this.bar.x!==this.track.x&&!this.barMoving){var t=null;this.barMoving=!0,this.bar.inputEnabled=!1,t=this.bar.x-this.hslice,this.addScrollTween({x:t})}},uiWidgets.ValueBar.prototype.scrollRight=function(){"use strict";if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=null;this.barMoving=!0,this.bar.inputEnabled=!1,t=this.bar.x+this.hslice,this.addScrollTween({x:t})}},uiWidgets.ValueBar.prototype.getGripPositionRatio=function(){"use strict";var t=this.getBarPosition()-this.getMouseDelta();t<0?t=0:t>=this.trackScrollAreaSize&&(t=this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return isNaN(i)&&(i=0),i};var Phaser;(uiWidgets=uiWidgets||{}).Viewport=function(t,i,s,e,a){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.x=i,this.y=s,this.area={x:i,y:s,width:e,height:a},this.mask=this.game.add.graphics(this.area.x,this.area.y),this.mask.beginFill(255),this.mask.drawRect(0,0,e,a),this.mask.endFill()},uiWidgets.Viewport.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Viewport.constructor=uiWidgets.Viewport,uiWidgets.Viewport.prototype.addNode=function(t){"use strict";this.add(t)},uiWidgets.Viewport.prototype.disableOutOfBounds=function(t,i,s){"use strict";var e,a,r,h;if(void 0!==t)for(var o=0;o<t.length;o++)(e=t[o]).inputEnabled=!0,h=e.world||e,s?(a=h.y,r=i.viewport.area.y):(a=h.x,r=i.viewport.area.x),a<r&&(e.inputEnabled=!1),this.disableOutOfBounds(e.children,i,s)};