/*! phaser-ui-tools 2018-04-02 */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.uiWidgets={})}(this,function(t){"use strict";var c=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},n=function(){function a(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}}(),e=function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)},u=function(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i},a=function(t){function r(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];c(this,r);var s=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return s.game=t,s.x=i,s.y=e,s.vertical=a,s}return e(r,t),n(r,[{key:"setTrackScrollAreaSize",value:function(){this.vertical?this.trackScrollAreaSize=this.track.height-this.vslice:this.trackScrollAreaSize=this.track.width-this.hslice}},{key:"centerStaticAxis",value:function(){this.vertical?this.bar.x=this.track.x+this.track.width/2-this.bar.width/2:this.bar.y=this.track.y+this.track.height/2-this.bar.height/2}}]),r}(Phaser.Group),i=function(t){function i(){return c(this,i),u(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e(i,a),n(i,[{key:"verticalTrackClick",value:function(){var t=this.game.input.mousePointer.y;t>this.bar.y+this.worldPosition.y+this.bar.height?this.scrollDown():t<this.bar.y+this.worldPosition.y&&this.scrollUp()}},{key:"horizontalTrackClick",value:function(){var t=this.game.input.mousePointer.x;t>this.bar.x+this.bar.width+this.worldPosition.x?this.scrollRight():t<this.bar.x+this.worldPosition.x&&this.scrollLeft()}},{key:"enableTrackClick",value:function(){var t=void 0;this.track.inputEnabled=!0,t=this.vertical?this.verticalTrackClick:this.horizontalTrackClick,this.track.events.onInputDown.add(t,this)}},{key:"enableBarInput",value:function(){this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0}},{key:"enableBarDrag",value:function(){this.setDraggableArea(),this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.snapping&&this.bar.events.onInputUp.add(this.snapToClosestPosition,this),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this);var t=void 0;this.vertical?(this.bar.input.allowHorizontalDrag=!1,t=this.verticalDraggableArea):(this.bar.input.allowVerticalDrag=!1,t=this.horizontalDraggableArea),this.bar.input.boundsRect=new Phaser.Rectangle(t.x,t.y,t.w,t.h)}},{key:"saveMousePosition",value:function(t,i){this.mousePointer={x:i.x,y:i.y}}},{key:"getBarPosition",value:function(){var t=this.valueRange.getCurrentValue()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t}},{key:"getMouseDelta",value:function(){var t=void 0;t=this.vertical?this.mousePointer.y:this.mousePointer.x;var i=void 0;if(this.trackClicked)i={x:this.bar.x,y:this.bar.y};else{var e=this.game.input.mousePointer;i={x:e.x,y:e.y}}var a=void 0;a=this.vertical?i.y:i.x,this.mousePointer=i;return a<(this.vertical?this.track.height+this.worldPosition.y:this.track.width+this.worldPosition.x)?t-a:0}},{key:"addScrollTween",value:function(t){this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0;var i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0);this.addScrollTweenEvents(i)}},{key:"addScrollTweenEvents",value:function(t){t.onUpdateCallback(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)}},{key:"scrollUp",value:function(){if(this.bar.y!==this.track.y&&!this.barMoving){var t=this.bar.y-this.vslice,i=null;this.barMoving=!0,i=t<=this.track.y?this.minY:this.bar.y-this.vslice,this.addScrollTween({y:i})}}},{key:"scrollDown",value:function(){if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=this.bar.y+2*this.vslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.y+this.track.height?this.maxY:this.bar.y+this.vslice,this.addScrollTween({y:i})}}},{key:"scrollLeft",value:function(){if(this.bar.x!==this.track.x&&!this.barMoving){var t=this.bar.x-this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t<=this.track.x?this.minX:this.bar.x-this.hslice,this.addScrollTween({x:i})}}},{key:"scrollRight",value:function(){if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=this.bar.x+2*this.hslice,i=null;this.barMoving=!0,this.bar.inputEnabled=!1,i=t>=this.track.x+this.track.width?this.maxX:this.bar.x+this.hslice,this.addScrollTween({x:i})}}},{key:"moveContent",value:function(){var t=this.getGripPositionRatio()*this.windowScrollAreaSize;this.valueRange.adjustValue(t),this.onMovement.dispatch(this)}}]),i}(),d=function(){function a(t,i,e){c(this,a),this.bar=t,this.startValue=i,this.maxValue=e,this.currentValue=i}return n(a,[{key:"getRatio",value:function(){return this.currentValue/this.maxValue}},{key:"getCurrentValue",value:function(){return this.currentValue}}]),a}(),v=function(){function s(t,i,e){c(this,s),this.step=t,this.startValue=i,this.maxValue=e+t,this.ratio=t/e,1<this.ratio&&(this.ratio=1),this.currentValue=i,this.steps=[];for(var a=0;a<this.maxValue;a+=t)this.steps.push(a)}return n(s,[{key:"adjustValue",value:function(t){this.currentValue=t}},{key:"getCurrentValue",value:function(){return this.currentValue}}]),s}(),l=function(){function e(t,i){c(this,e),this.viewport=t,(this.vertical=i)?(this.step=t.area.height,this.maxValue=t.height):(this.step=t.area.width,this.maxValue=t.width),this.ratio=this.step/this.maxValue,1<this.ratio&&(this.ratio=1)}return n(e,[{key:"adjustValue",value:function(t){this.vertical?this.viewport.y=t+this.viewport.area.y:this.viewport.x=t+this.viewport.area.x,this.viewport.disableOutOfBounds(this.viewport.children,this,this.vertical)}},{key:"getCurrentValue",value:function(){return this.vertical?this.viewport.y-this.viewport.area.y:this.viewport.x-this.viewport.area.x}}]),e}(),s=function(t){function l(t,i,e,a,s,r,h,n){c(this,l);var o=u(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t,i.x,i.y));return t.add.existing(o),o.valueRange=new d(o,e.startValue,e.maxValue),o.vertical=a||!1,o.reverse=s||!1,o.trackImage=r,o.barImage=h,o.tweenParams=n||{duration:300,ease:Phaser.Easing.Quadratic.Out},o.track=o.game.add.sprite(0,0,o.trackImage),o.add(o.track),o.bar=o.game.add.button(0,0,o.barImage,o.moveContent,o,1,0),o.add(o.bar),o.create(),o}return e(l,a),n(l,[{key:"setMask",value:function(){null!==this.bar.mask&&(this.bar.mask.destroy(),this.bar.mask=null);var t=this.game.add.graphics(this.maskX,this.maskY);t.beginFill(255),t.drawRect(0,0,this.maskW,this.maskH),this.bar.mask=t,this.add(t)}},{key:"getBarPosition",value:function(){var t=this.valueRange.getRatio()/this.windowScrollAreaSize;return this.trackScrollAreaSize*t}},{key:"create",value:function(){this.centerStaticAxis(),this.maskW=this.bar.width,this.maskH=this.bar.height,this.maskX=this.bar.x,this.maskY=this.bar.y,this.vertical?this.maskH=this.getBarSize():this.maskW=this.getBarSize(),this.reverse&&(this.vertical?this.maskY=this.getBarFraction():this.maskX=this.getBarFraction()),this.setMask(),this.windowScrollAreaSize=this.valueRange.maxValue,this.vslice=this.track.height*this.valueRange.getRatio(),this.hslice=this.track.width*this.valueRange.getRatio(),this.setTrackScrollAreaSize()}},{key:"addScrollTweenMask",value:function(t){this.game.add.tween(this.bar.mask).to(t,this.tweenParams.duration,this.tweenParams.ease,!0)}},{key:"adjustBar",value:function(t){this.valueRange.currentValue+=t;var i=void 0,e=this.getBarSize();i=this.reverse?this.vertical?{height:e,y:this.getBarFraction()}:{width:e,x:this.getBarFraction()}:this.vertical?{height:e}:{width:e},this.addScrollTweenMask(i)}},{key:"getBarFraction",value:function(){return this.vertical?this.track.height*this.valueRange.getRatio():this.track.width*this.valueRange.getRatio()}},{key:"getBarSize",value:function(){return this.reverse?this.vertical?this.track.height-this.valueRange.getRatio():this.track.width-this.valueRange.getRatio():this.getBarFraction()}}]),l}(),r=function(t){function o(t,i,e,a,s,r,h){c(this,o);var n=u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return t.add.existing(n),n.content=i,n.valueRange=new l(i,a),n.vertical=a||!1,n.draggable=e||!1,n.trackImage=s,n.barImage=r,n.minBarSize=44,n.tweenParams=h||{duration:300,ease:Phaser.Easing.Quadratic.Out},n.trackClicked=!1,n.barMoving=!1,n.mousePointer=null,n.track=n.game.add.sprite(0,0,n.trackImage),n.add(n.track),n.draggable&&n.enableTrackClick(),n.bar=n.game.add.button(n.x,n.y,n.barImage,n.moveContent,n,1,0),n.add(n.bar),n.resizeBar(),n.minY=n.track.y,n.maxY=n.track.y+n.track.height-n.bar.height,n.minX=n.track.x,n.maxX=n.track.x+n.track.width-n.bar.width,n.create(),n.onMovement=new Phaser.Signal,n}return e(o,i),n(o,[{key:"resizeBar",value:function(){var t=void 0;(t=this.vertical?this.track.height*this.valueRange.ratio:this.track.width*this.valueRange.ratio)<this.minBarSize&&(t=this.minBarSize),this.vertical?this.bar.height=t:this.bar.width=t}},{key:"create",value:function(){this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()}},{key:"setDraggableArea",value:function(){this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y,w:this.bar.width,h:this.track.height},this.horizontalDraggableArea={x:this.track.x,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width,h:this.bar.height}}},{key:"setInitialBarPosition",value:function(){var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y:this.bar.x=t+this.track.x}},{key:"getGripPositionRatio",value:function(){var t=this.getBarPosition()+this.getMouseDelta();0<t?t=0:t<=-this.trackScrollAreaSize&&(t=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=-this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=-this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return Number.isNaN(i)&&(i=0),i}}]),o}(),h=function(t){function l(t,i,e,a,s,r,h,n){c(this,l);var o=u(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t,i.x,i.y));return t.add.existing(o),o.valueRange=new v(e.step,e.startValue,e.maxValue),o.vertical=s||!1,o.draggable=a||!1,o.trackImage=r,o.barImage=h,o.tweenParams=n||{duration:300,ease:Phaser.Easing.Quadratic.Out},o.trackClicked=!1,o.barMoving=!1,o.mousePointer=null,o.track=o.game.add.sprite(0,0,o.trackImage),o.add(o.track),o.draggable&&o.enableTrackClick(),o.bar=o.game.add.button(o.x,o.y,o.barImage,o.moveContent,o,1,0),o.bg=o.game.add.graphics(0,0),o.add(o.bg),o.sendToBack(o.bg),o.bg.beginFill(16711680,0),o.vertical?o.bg.drawRect(0,0-o.bar.height/2,1,o.track.height+o.bar.height):o.bg.drawRect(0-o.bar.width/2,0,o.track.width+o.bar.width,1),o.bg.endFill(),o.snapping=!0,o.add(o.bar),o.minY=o.track.y-o.bar.height/2,o.maxY=o.track.y+o.track.height-o.bar.height/2,o.minX=o.track.x-o.bar.width/2,o.maxX=o.track.x+o.track.width-o.bar.width/2,o.create(),o.vertical?(o.upEvent=o.scrollUp,o.downEvent=o.scrollDown):(o.upEvent=o.scrollLeft,o.downEvent=o.scrollRight),o.onMovement=new Phaser.Signal,o}return e(l,i),n(l,[{key:"create",value:function(){this.centerStaticAxis(),this.draggable&&this.enableBarDrag(),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vslice=this.track.height*this.valueRange.ratio,this.hslice=this.track.width*this.valueRange.ratio,this.setTrackScrollAreaSize(),this.mousePointer={x:this.bar.x,y:this.bar.y},this.setInitialBarPosition()}},{key:"setDraggableArea",value:function(){this.verticalDraggableArea={x:this.track.x-(this.bar.width-this.track.width)/2,y:this.track.y-this.bar.height/2,w:this.bar.width,h:this.track.height+this.bar.height},this.horizontalDraggableArea={x:this.track.x-this.bar.width/2,y:this.track.y-(this.bar.height-this.track.height)/2,w:this.track.width+this.bar.width,h:this.bar.height}}},{key:"setTrackScrollAreaSize",value:function(){this.vertical?this.trackScrollAreaSize=this.track.height:this.trackScrollAreaSize=this.track.width}},{key:"setInitialBarPosition",value:function(){var t=this.getBarPosition();this.vertical?this.bar.y=t+this.track.y-this.bar.height/2:this.bar.x=t+this.track.x-this.bar.width/2}},{key:"getClosestPosition",value:function(){for(var t=this.valueRange.getCurrentValue(),i=Math.abs(t-this.valueRange.steps[0]),e=this.valueRange.steps[0],a=0;a<this.valueRange.steps.length;a++){var s=Math.abs(t-this.valueRange.steps[a]);s<i&&(i=s,e=this.valueRange.steps[a])}return e}},{key:"snapToClosestPosition",value:function(){var t=this.getClosestPosition();this.valueRange.adjustValue(t),this.moveContent(),this.setInitialBarPosition()}},{key:"addScrollTweenEvents",value:function(t){t.onComplete.add(this.moveContent,this),t.onComplete.add(this.enableBarInput,this)}},{key:"getGripPositionRatio",value:function(){var t=this.getBarPosition()-this.getMouseDelta();t<0?t=0:t>=this.trackScrollAreaSize&&(t=this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?t=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(t=this.trackScrollAreaSize):this.bar.x<=this.track.x?t=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(t=this.trackScrollAreaSize);var i=t/this.trackScrollAreaSize;return Number.isNaN(i)&&(i=0),i}}]),l}(),o=function(t){function n(t,i,e,a,s,r){c(this,n);var h=u(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,s,r,i));return t.add.existing(h),h.text=h.game.add.text(0,0,e,a),h.text.anchor.set(.5,.5),h.addChild(h.text),h}return e(n,t),n}(Phaser.Sprite),g=function(t){function l(t,i,e,a,s,r,h,n){c(this,l);var o=u(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t,s,r,i,h,n));return t.add.existing(o),o.text=o.game.add.text(0,0,e,a),o.text.anchor.set(.5,.5),o.addChild(o.text),o}return e(l,t),l}(Phaser.Button),k=function(t){function h(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;c(this,h);var s=u(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,t));if(t.add.existing(s),s.x=i,s.y=e,s.game=t,null!==(s.bg=a)){var r=t.add.sprite(0,0,a);r.sendToBack(),r.alignIn(s,Phaser.TOP_LEFT)}return s}return e(h,t),n(h,[{key:"addNode",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:null)||this.alignment;this.add(t);var s=this.children[this.children.length-2];void 0!==s&&t.alignTo(s,a,i,e),"enableBarDrag"in t&&t.enableBarDrag()}}]),h}(Phaser.Group),b=function(t){function r(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;c(this,r);var s=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,i,e,a));return s.alignment=Phaser.BOTTOM_CENTER,s}return e(r,k),r}(),y=function(t){function r(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;c(this,r);var s=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,i,e,a));return s.alignment=Phaser.RIGHT_CENTER,s}return e(r,k),r}(),p=function(t){function h(t,i,e,a,s){c(this,h);var r=u(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,t));return t.add.existing(r),r.x=i,r.y=e,r.area={x:i,y:e,width:a,height:s},r.mask=r.game.add.graphics(r.area.x,r.area.y),r.mask.beginFill(255),r.mask.drawRect(0,0,a,s),r.mask.endFill(),r}return e(h,t),n(h,[{key:"addNode",value:function(t){this.add(t)}},{key:"disableOutOfBounds",value:function(t,i,e){var a=void 0,s=void 0,r=void 0,h=void 0;if(void 0!==t)for(var n=0;n<t.length;n++)(a=t[n]).inputEnabled=!0,h=a.world||a,e?(s=h.y,r=i.viewport.area.y):(s=h.x,r=i.viewport.area.x),s<r&&(a.inputEnabled=!1),this.disableOutOfBounds(a.children,i,e)}}]),h}(Phaser.Group),m=function(){function a(t,i,e){c(this,a),this.game=t,this.vertical=i||!1,this.callbackContext=e,this.children=[],this.selected=null,this.idx=0,this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.upEvent=this.prevItem,this.downEvent=this.nextItem,this.onPrevious=new Phaser.Signal,this.onNext=new Phaser.Signal,this.activateGroup()}return n(a,[{key:"addNode",value:function(t){this.children.push(t),this.selected=this.children[0],this.useBar()}},{key:"prevItem",value:function(){this.idx=this.idx-1,this.idx<0&&(this.idx=this.children.length-1),this.selected=this.children[this.idx],this.useBar(),this.onPrevious.dispatch(this,this.callbackContext)}},{key:"nextItem",value:function(){this.idx=(this.idx+1)%this.children.length,this.selected=this.children[this.idx],this.useBar(),this.onNext.dispatch(this,this.callbackContext)}},{key:"activateGroup",value:function(){this.vertical?(this.upKey.onDown.add(this.upEvent,this),this.downKey.onDown.add(this.downEvent,this)):(this.leftKey.onDown.add(this.upEvent,this),this.rightKey.onDown.add(this.downEvent,this))}},{key:"useBar",value:function(){this.vertical?(this.leftKey.onDown.removeAll(),this.rightKey.onDown.removeAll(),this.leftKey.onDown.add(this.selected.upEvent,this.selected),this.rightKey.onDown.add(this.selected.downEvent,this.selected)):(this.upKey.onDown.removeAll(),this.downKey.onDown.removeAll(),this.upKey.onDown.add(this.selected.upEvent,this.selected),this.downKey.onDown.add(this.selected.downEvent,this.selected))}}]),a}(),w={modulo:function(t,i){return(t%i+i)%i},operators:{"+":function(t,i){return t+i},"-":function(t,i){return t-i}}},f=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;c(this,r),this.x=t,this.y=i,this.z=e,this.sprite=a,this.position=s}return n(r,[{key:"getSinCosOfAngle",value:function(t){var i=t*Math.PI/180;return{cosine:Math.cos(i),sine:Math.sin(i)}}},{key:"rotateY",value:function(t){var i=this.getSinCosOfAngle(t),e=this.z*i.cosine-this.x*i.sine;return new r(this.z*i.sine+this.x*i.cosine,this.y,e)}},{key:"rotateX",value:function(t){var i=this.getSinCosOfAngle(t),e=this.y*i.cosine-this.z*i.sine,a=this.y*i.sine+this.z*i.cosine;return new r(this.x,e,a)}},{key:"rotateZ",value:function(t){var i=this.getSinCosOfAngle(t);return new r(this.x*i.cosine-this.y*i.sine,this.x*i.sine+this.y*i.cosine,this.z)}},{key:"rotate",value:function(t,i){return"x"===t?this.rotateX(i):"y"===t?this.rotateY(i):"z"===t?this.rotateZ(i):null}},{key:"project",value:function(t,i,e){return new r(this.x*e+t,-this.y*e+i,this.z)}}]),r}(),x=function(){function l(t,i,e,a,s,r,h,n,o){c(this,l),this.game=t,this.xy=i,this.sprites=e,this.firstPlace=a,this.zoom=s,this.axis=r,this.rotationAxis=h,this.visibleRange=n||null,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.onStart=new Phaser.Signal,this.onComplete=new Phaser.Signal,this.onBackComplete=new Phaser.Signal,this.onForwardComplete=new Phaser.Signal,this.group=this.game.add.group()}return n(l,[{key:"activate",value:function(){var t=void 0,i=void 0,e=void 0,a=void 0,s=void 0,r=void 0;if(this.pointsAmount=this.sprites.length,this.totalPositions=this.pointsAmount-1,this.rotationAmount=360/this.pointsAmount,null!==this.visibleRange){for(var h=[],n=0;n<=this.totalPositions;n++)h.push(n);var o=h.slice(0,this.visibleRange.max),l=h.slice(this.visibleRange.min);this.visiblePositions=o.concat(l)}this.moving=!1,this.direction=null,this.wheelItems=[];for(var c=2*Math.PI/this.pointsAmount,u=0;u<this.pointsAmount;u++)this.sprites[u].wheelPosition=u,this.group.add(this.sprites[u]),t=c*u,i=1*Math.cos(t),e=1*Math.sin(t),"x"===this.axis?(a=-1,s=i,r=e):"y"===this.axis?(a=i,s=-1,r=e):"z"===this.axis&&(a=i,s=e,r=-1),this.wheelItems.push(new f(a,s,r,this.sprites[u],u));this.active=this.wheelItems[this.firstPlace].sprite,this.project()}},{key:"moveBack",value:function(){!1===this.moving&&(this.moving=!0,this.direction=0,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]+=this.rotationAmount:this.rotationAxis[this.axis]-=this.rotationAmount,this.updatePosition("+"),this.project(),this.resetAngle())}},{key:"moveForward",value:function(){!1===this.moving&&(this.moving=!0,this.direction=1,"x"===this.axis||"z"===this.axis?this.rotationAxis[this.axis]-=this.rotationAmount:this.rotationAxis[this.axis]+=this.rotationAmount,this.updatePosition("-"),this.project(),this.resetAngle())}},{key:"project",value:function(){var t=void 0,i=["x","y","z"],e=i.indexOf(this.axis);i.splice(e,1);for(var a=0;a<this.wheelItems.length;a++){var s=this.wheelItems[a].rotate(this.axis,this.rotationAxis[this.axis]).rotate(i[0],this.rotationAxis[i[0]]).rotate(i[1],this.rotationAxis[i[1]]).project(this.xy.x,this.xy.y,this.zoom),r=this.wheelItems[a].sprite;if(r.lz=s.z,this.wheelItems[a].position===this.firstPlace)r.alpha=1,this.active=this.wheelItems[a].sprite;else if(null!==this.visibleRange){var h=this.visiblePositions.includes(this.wheelItems[a].position);r.alpha=h?1:0}(t=this.game.add.tween(r).to({x:s.x,y:s.y},this.tweenParams.duration,this.tweenParams.ease,!0)).onComplete.add(this.enableMoving,this)}this.group.sort("lz",Phaser.Group.SORT_ASCENDING),t.onStart.add(this.dispatchOnStart,this),t.onComplete.add(this.dispatchOnComplete,this)}},{key:"dispatchOnStart",value:function(){this.onStart.dispatch(this)}},{key:"dispatchOnComplete",value:function(){0===this.direction?this.onBackComplete.dispatch(this):1===this.direction&&this.onForwardComplete.dispatch(this),this.onComplete.dispatch(this)}},{key:"enableMoving",value:function(){this.moving=!1}},{key:"updatePosition",value:function(t){for(var i=0;i<this.wheelItems.length;i++){var e=this.wheelItems[i].position;this.wheelItems[i].position=w.operators[t](e,1);var a=w.modulo(this.wheelItems[i].position,this.pointsAmount);this.wheelItems[i].position=a,this.wheelItems[i].sprite.wheelPosition=a}}},{key:"resetAngle",value:function(){var t=this.rotationAxis[this.axis];360!==t&&-360!==t||(this.rotationAxis[this.axis]=0)}}]),l}();t.Bar=a,t.DraggableBar=i,t.QuantityBar=s,t.QuantityRange=d,t.ValueRange=v,t.ViewportRange=l,t.Scrollbar=r,t.ValueBar=h,t.textSprite=o,t.textButton=g,t.Column=b,t.Frame=k,t.Row=y,t.Viewport=p,t.KeyboardGroup=m,t.utils=w,t.Wheel3D=x,Object.defineProperty(t,"__esModule",{value:!0})});